{"./":{"url":"./","title":"前言","keywords":"","body":"Emacs Handbook 此书是emacs的阅读与理解，帮助大家更快了解emacs的管理和使用。 GitHub地址：https://github.com/eiuapp/emacs-handbook 在线访问地址：https://eiuapp.github.io/emacs-handbook Emacs是神的编辑器，而Vim是编辑器之神. 相关资源 关于 本书中引用了一些公开的分享与链接并加以整理。 本书作于2019年初，会持续更新。 Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-env.html":{"url":"post/emacs-env.html","title":"环境","keywords":"","body":"Env env-mac os: mac os 10.13.3 emacs: 26.1 spacemacs： 0.200.13@26.1 env-wsl host: window10 wsl os: ubuntu 16.04 emacs: 26.1 spacemacs： 0.200.13@26.1 Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/chemacs.html":{"url":"post/chemacs.html","title":"chemacs快速切换emacs配置","keywords":"","body":"chemacs https://github.com/plexus/chemacs 通过chemacs使用spacemacs cat ~/.emacs-profiles.el ;; ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\")))) ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\"))) (\"spacemacs\" . ((user-emacs-directory . \"~/spacemacs\") (env . ((\"SPACEMACSDIR\" . \"~/.spacemacs.d\"))))) ) 有效 运行 emacs emacs --with-profiles spacemacs 通过chemacs使用lazycat-emacs ubuntu 上已经使用上了 lazycat-emacs 这一部分, 参考 lazycat-emacs 安装 配置 init.el 文件 因为 chemacs 启动的时候, 是通过init.el文件启动的, 而我们的 lazycat 是 site-start.el文件启动的. DESKTOP-APB1HCJ% cp ~/lazycat-emacs/site-start.el ~/lazycat-emacs/init.el DESKTOP-APB1HCJ% vi ~/lazycat-emacs/init.el DESKTOP-APB1HCJ% cat ~/lazycat-emacs/init.el (defun add-subdirs-to-load-path (dir) \"Recursive add directories to `load-path'.\" (let ((default-directory (file-name-as-directory dir))) (add-to-list 'load-path dir) (normal-top-level-add-subdirs-to-load-path))) (add-subdirs-to-load-path \"/usr/share/emacs/lazycat-u/\") (require 'init) 配置 ~/.emacs-profiles.el 文件 DESKTOP-APB1HCJ% cat ~/.emacs-profiles.el ;; ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\")))) ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\"))) (\"spacemacs\" . ((user-emacs-directory . \"~/spacemacs\") (env . ((\"SPACEMACSDIR\" . \"~/.spacemacs.d\"))))) (\"lazycat\" . ((user-emacs-directory . \"~/lazycat-emacs\")))) DESKTOP-APB1HCJ% 启动 DESKTOP-APB1HCJ% emacs --with-profile lazycat (可选)设置 lazycat-emacs 为默认启动emacs DESKTOP-APB1HCJ% echo 'lazycat' > ~/.emacs-profile DESKTOP-APB1HCJ% emacs Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/lazycat-emacs.html":{"url":"post/lazycat-emacs.html","title":"lazycat-emacs安装","keywords":"","body":"(未完成) lazycat-emacs 安装 ENV env: env-wsl os: ubuntu16 STEP 总结 具体配置,可以看一下 https://github.com/eiuapp/lazycat-emacs 的 eiuapp 分支 改一下词典的中文名为英文名. 修改 sdcv.el 中 format: 1.去 -x (可跳过)前期工作 DESKTOP-APB1HCJ% pwd /mnt/c/Users/a/emacs/lazycat DESKTOP-APB1HCJ% ls emacs lazycat-emacs lazycat-emacs.origin lazycat-emacs.origin.20190505 DESKTOP-APB1HCJ% ls /usr/share/emacs 26.2 site-lisp DESKTOP-APB1HCJ% sudo ln -s /mnt/c/Users/a/emacs/lazycat/lazycat-emacs/site-lisp /usr/share/emacs/lazycat DESKTOP-APB1HCJ% ls /usr/share/emacs 26.2 lazycat site-lisp DESKTOP-APB1HCJ% ls /usr/share/emacs/site-lisp autoconf debian-startup.el desktop-entry-mode.el dictionaries-common subdirs.el DESKTOP-APB1HCJ% sudo cp /mnt/c/Users/a/emacs/lazycat/lazycat-emacs/site-start.el /usr/share/emacs/site-lisp/ DESKTOP-APB1HCJ% ls /usr/share/emacs 26.2 lazycat site-lisp DESKTOP-APB1HCJ% ls /usr/share/emacs/site-lisp autoconf debian-startup.el desktop-entry-mode.el dictionaries-common site-start.el subdirs.el DESKTOP-APB1HCJ% emacs 这个时候, 报错如下: Eager macro-expansion failure: (void-function -map) set-face-attribute: Font not available: # user-error: Minibuffer window is not active 看一下 Font not available 的问题 https://github.com/syl20bnr/spacemacs https://github.com/adobe-fonts/source-code-pro https://github.com/adobe-fonts/source-code-pro/issues/17#issuecomment-8967116 这里应该是没有安装,所以,安装一下 最后是 https://askubuntu.com/questions/193072/how-to-use-the-adobe-source-code-pro-font 安装完成. 然后,发现 安装的操作系统不一致,还是会有一些麻烦,所以,找一下历史版本是否有debian系统,很幸运地找到了. 从 fork 里找到了 deepin-emacs, 下面这个相对 commit 数最大,为 445 https://github.com/xuxiaoyu2010/deepin-emacs 按照这个上面的 README.org 文件. 走到 ./configure 这一步,报错如下 checking for gif_lib.h... yes checking for GifMakeMapObject in -lgif... yes configure: error: The following required libraries were not found: gnutls Maybe some development libraries/packages are missing? To build anyway, give: --with-gnutls=ifavailable as options to configure. DESKTOP-APB1HCJ% 尝试去除 --with-x-toolkit=gtk3 因为我们这里的 xserver 是通过 MobaXterm_Personal_11.1.exe . ./configure --prefix=/usr/share/deepin-emacs/common 还是会报一样的错误 https://stackoverflow.com/questions/52722096/build-emacs-and-gnutls-not-found 方法1 apt-cache search libgnutls 然后安装相应的包. 方法2 ./configure --prefix=/usr/share/deepin-emacs/common --with-x-toolkit=gtk3 --with-gnutls=ifavailable 我用 ./configure --prefix=/usr/share/deepin-emacs/common --with-x-toolkit=gtk3 --with-gnutls=ifavailable 然后 make ,又报下面的错误 Loading /mnt/c/Users/a/emacs/lazycat/emacs/lisp/emacs-lisp/lisp.el (source)... Wrong type argument: char-table-p, nil Makefile:807: recipe for target 'bootstrap-emacs.pdmp' failed make[1]: *** [bootstrap-emacs.pdmp] Error 255 make[1]: Leaving directory '/mnt/c/Users/a/emacs/lazycat/emacs/src' Makefile:424: recipe for target 'src' failed make: *** [src] Error 2 DESKTOP-APB1HCJ% 回到又用 configure 的方法1 sudo apt-get install libgnutls-dev ./configure --prefix=/usr/share/deepin-emacs/common --with-x-toolkit=gtk3 make 还是报一样的错误 回想一下, 我们这一步的目的就是 编译安装 emacs , 所以, http://ergoemacs.org/emacs/building_emacs_from_git_repository.html http://ergoemacs.org/emacs/building_emacs_on_linux.html 运行 sudo apt-get install build-essential sudo apt-get build-dep emacs24 还是会报错. shell 编译安装 emacs https://github.com/emacs-mirror/emacs/blob/master/INSTALL 看了一下, 然后找到 https://github.com/favadi/build-emacs 执行一下这里的脚本. ./build-emacs.sh 没问题,安装成功. 编译安装 emacs 尝试用 build-emacs.sh 中的方法去安装 deepin-emacs sudo mkdir -p /usr/share/xxy-deepin-emacs/common ./configure --prefix=/usr/share/xxy-deepin-emacs/common --with-xft --with-x-toolkit=gtk3 make sudo make install 安装完毕,则意味着2点: 启动文件在 /usr/share/xxy-deepin-emacs/common/bin/ 中 启动配置中的 site-start.el 应该放在 /usr/share/xxy-deepin-emacs/common/share/emacs/site-lisp/ 中 (可跳过)安装 deepin-emacs Install Deepin emacs sudo cp ./site-start.el /usr/share/xxy-deepin-emacs/common/share/emacs/site-lisp/ sudo cp -r ./site-lisp /usr/share/xxy-deepin-emacs sudo ln -s /usr/share/xxy-deepin-emacs/common/bin/emacs /usr/bin/xxy-deepin-emacs 启动 which xxy-deepin-emacs xxy-deepin-emacs 报错如下 Eager macro-expansion failure: (void-function -map) set-face-attribute: Font not available: # 这到底是个什么错误? 报错信息中提到了 Droid Sans Mono 搜索 ubuntu 安装 Droid Sans Mono https://www.jianshu.com/p/ed098f15f638 sudo apt-get install ttf-droid 报错误 E: Package 'ttf-droid' has no installation candidate https://blog.csdn.net/weixin_33895695/article/details/85552268 sudo apt-get install fonts-droid-fallback 再启动 which xxy-deepin-emacs xxy-deepin-emacs 报错依旧 提issue, https://github.com/manateelazycat/lazycat-emacs/issues/17 经过回答,是另一个思路,换成其它字体. 换字体 找到字体的位置 因为, 在 deepin-emacs 中没有找到这个 字体,我又回到最新的 lazycat-emacs lazycat-emacs 为不再污染 用户之前的 emacs 设置, 决定,新建立一个用户v, 并设置好 ${HOME} 地圵 编译 emacs 之前,做过了,不做了, 总之是,编译到 /usr/share/xxy-deepin-emacs/common/ 中了. 配置 lazycat-emacs clone the repository git clone https://github.com/manateelazycat/lazycat-emacs/ ~ Build my config symlink to emacs directory: sudo ln -s ~/lazycat-emacs/site-lisp /usr/share/emacs/lazycat 做软链接,方便本地修改. 或者 sudo cp -r ~/lazycat-emacs/site-lisp/ /usr/share/emacs/lazycat Copy site-start.el in emacs directory to start my config: sudo cp ~/lazycat-emacs/site-start.el /usr/share/xxy-deepin-emacs/common/share/emacs/site-lisp/ 这个 site-start.el 文件,是会加载刚刚我们放进去的目录,所以如果刚刚放入 /usr/share/emacs 中的不是这个目录, 则要修改一下目录地圵. (add-subdirs-to-load-path \"/usr/share/emacs/lazycat\") 比如 DESKTOP-APB1HCJ% cat /usr/share/xxy-deepin-emacs/common/share/emacs/site-lisp/site-start.el (defun add-subdirs-to-load-path (dir) \"Recursive add directories to `load-path'.\" (let ((default-directory (file-name-as-directory dir))) (add-to-list 'load-path dir) (normal-top-level-add-subdirs-to-load-path))) (add-subdirs-to-load-path \"/usr/share/emacs/lazycat/site-lisp/\") (require 'init) DESKTOP-APB1HCJ% 修改字体 因为我们这里的字体问题, 修改成之前为了spacemacs而安装的字体 Source Code Pro DESKTOP-APB1HCJ% sudo head lazycat/site-lisp/extensions/lazycat-theme/lazycat-theme.el | grep emacs-font-name (defvar emacs-font-name \"\" (setq emacs-font-name \"Monaco\")) (setq emacs-font-name \"Source Code Pro\"))) DESKTOP-APB1HCJ% Start emacs: cd /usr/share/xxy-deepin-emacs/common/bin/ ./emacs lazycat-emacs 安装在已有用户u下 复制环境 为了不影响刚刚新建用户v的 lazycat , 我这里 把 复制到了 /usr/share/xxy-deepin-emacs-u DESKTOP-APB1HCJ% sudo cp /usr/share/xxy-deepin-emacs/ /usr/share/xxy-deepin-emacs-u/ 移除 ~/.emacs.d/ DESKTOP-APB1HCJ% mv ~/.emacs.d/ ~/.emacs.d.wsl-ubuntu16-20190521.bak/ 把 lazycat-emacs clone 至 ~ 下 必须要放在用户的${HOME}目录下, 否则报错. ln -s site-lisp DESKTOP-APB1HCJ% sudo rm /usr/share/emacs/lazycat-u DESKTOP-APB1HCJ% sudo ln -s ~/lazycat-emacs/site-lisp /usr/share/emacs/lazycat-u DESKTOP-APB1HCJ% ll /usr/share/emacs/lazycat-u/ total 0 drwxr-xr-x 1 u u 4096 May 9 13:49 . drwxr-xr-x 1 u u 4096 May 10 11:04 .. drwxr-xr-x 1 u u 4096 May 9 13:49 config drwxr-xr-x 1 u u 4096 May 9 13:49 extensions drwxr-xr-x 1 u u 4096 May 9 13:49 pyim-dict drwxr-xr-x 1 u u 4096 May 10 10:57 sdcv-dict 这样, 就可以直接在~/lazycat-emacs/就可以有效果了. 配置 site-start.el DESKTOP-APB1HCJ% cat /usr/share/xxy-deepin-emacs/common/share/emacs/site-lisp/site-start.el (defun add-subdirs-to-load-path (dir) \"Recursive add directories to `load-path'.\" (let ((default-directory (file-name-as-directory dir))) (add-to-list 'load-path dir) (normal-top-level-add-subdirs-to-load-path))) (add-subdirs-to-load-path \"/usr/share/emacs/lazycat/\") (require 'init) DESKTOP-APB1HCJ% sudo vi /usr/share/xxy-deepin-emacs-u/common/share/emacs/site-lisp/site-start.el DESKTOP-APB1HCJ% cat /usr/share/xxy-deepin-emacs-u/common/share/emacs/site-lisp/site-start.el (defun add-subdirs-to-load-path (dir) \"Recursive add directories to `load-path'.\" (let ((default-directory (file-name-as-directory dir))) (add-to-list 'load-path dir) (normal-top-level-add-subdirs-to-load-path))) (add-subdirs-to-load-path \"/usr/share/emacs/lazycat-u/\") (require 'init) DESKTOP-APB1HCJ% 启动 DESKTOP-APB1HCJ% pwd /usr/share/xxy-deepin-emacs-u/common/bin DESKTOP-APB1HCJ% ls ctags ebrowse emacs emacs-26.1 emacsclient etags DESKTOP-APB1HCJ% ./emacs 完美了, 可以在 u 用户下使用 lazycat-emacs 了. 问题(已解决) M-x sdcv-search-pointer+ 提示 mpv, mplayer or mpg123 is needed to play word voice 先安装 mpv 吧 http://ubuntuhandbook.org/index.php/2016/07/install-mpv-media-player-ubuntu-16-04/ To add PPA, open terminal (Ctrl+Alt+T) and run the command: sudo add-apt-repository ppa:mc3man/mpv-tests Then upgrade Mpv using Software Updater or just run the command in terminal to install/upgrade it: sudo apt update && sudo apt install mpv (Optional) To remove the PPA, go to Software & Updates -> Other Software tab. And remove mpv via command: sudo apt remove mpv && sudo apt autoremove 重启,问题解决. sdcv-filter sdcv-string is Nothing similar to hero, sorry : 运行 M-x sdcv-search-pointer+ LANG=en_US.UTF-8 sdcv -n -u \"懒虫简明英汉词典\" -u \"懒虫简明汉英词典\" -u \"KDic11万英汉词典\" hero --data-dir=/mnt/c/Users/a/wsl/home/v/lazycat-emacs/site-lisp/sdcv-dict(1:0 top) dir:v git:master text-mode [2019-05-09 19:07] sdcv-filter sdcv-string is Nothing similar to hero, sorry : 因为之前在 spacemacs 下已经成功了,所以我觉得,比较一下不同就可以了.不同点: data-dir 用户不同 先假定不受 用户不同的影响, 那么,我们就先尝试在命令行能否有返回 因为, wsl下,输入中文会有问题,所以,我先在 词典集 中,复制一个, 让其可在 bash 中运行. 具体操作: 把 ~/lazycat-emacs/site-lisp/sdcv-dict/ 中一个词典复制,修改其中的 *.ifo 中的 bookname 为英文, 比如, 把 lazyworm-ec.ifo 中的 bookname=lazywormecbak 如,我们用刚刚这个复制出来的 lazywormecbak 词典, 翻译 hero 这个词. v@DESKTOP-APB1HCJ:~$ LANG=en_US.UTF-8 sdcv -n -u \"lazywormecbak\" hero --data-dir=/mnt/c/Users/a/wsl/home/v/lazycat-emacs/site-lisp/sdcv-dict Found 1 items, similar to hero. -->lazywormecbak -->hero ['hiru] n. 英雄, 男主角, 男主人公 v@DESKTOP-APB1HCJ:~$ 这样说明,如果我们去修改 仓库中的 ~/lazycat-emacs/site-lisp/config/init-sdcv.el 的词典 sdcv-dictionary-simple-list 为 lazywormecbak, 应该要返回一样的结果. (setq sdcv-dictionary-simple-list ;星际译王屏幕取词词典, 简单, 快速 '(\"lazywormecbak\")) ;; '(\"懒虫简明英汉词典\" ;; \"懒虫简明汉英词典\" ;; \"KDic11万英汉词典\")) (setq sdcv-dictionary-complete-list ;星际译王的词典, 完全, 详细 '( \"lazywormecbak\" \"懒虫简明英汉词典\" \"英汉汉英专业词典\" \"XDICT英汉辞典\" \"stardict1.3英汉辞典\" \"WordNet\" \"XDICT汉英辞典\" \"Jargon\" \"懒虫简明汉英词典\" \"FOLDOC\" \"新世纪英汉科技大词典\" \"KDic11万英汉词典\" \"朗道汉英字典5.0\" \"CDICT5英汉辞典\" \"新世纪汉英科技大词典\" \"牛津英汉双解美化版\" \"21世纪双语科技词典\" \"quick_eng-zh_CN\" )) 测试. 成功得到返回结果. 从这里看出, 如果我们要在这种情况下, 使用词典, 则要修改一下词典的中文名为英文名. 问题(未解决) 开启 emacs 时, message 提示, no desktop file Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/lazycat-emacs-git-merge-master.html":{"url":"post/lazycat-emacs-git-merge-master.html","title":"lazycat-emacs同步更新","keywords":"","body":"与 lazycat 同步更新 git fork update 同步更新Github上Fork的项目 https://www.jianshu.com/p/8ab6ef7ce5e3 https://baijiahao.baidu.com/s?id=1621872750804681718&wfr=spider&for=pc https://blog.csdn.net/lz_peter/article/details/77972270 本地更新 当 manateelazycat/lazycat-emacs 有更新时，merge新代码 git checkout master git pull origin master git checkout eiuapp git pull origin eiuapp git merge master git submodule init git submodule update --remote 启动 emacs --with-profile lazycat 未找到 benchmark-** 文件 如果出现了 未找到 benchmark-** 这样的启动错误, 则是因为, DESKTOP-APB1HCJ% pwd /mnt/c/Users/a/lazycat-emacs DESKTOP-APB1HCJ% cat .gitmodules | grep benchma [submodule \"benchmark-init-el\"] path = site-lisp/extensions/benchmark-init-el url = https://github.com/dholm/benchmark-init-el.git DESKTOP-APB1HCJ% ls site-lisp/extensions/benchmark-init-el -a . .. DESKTOP-APB1HCJ% 这就说明, 代码更新了, 子模块文件未下载. 所以要运行一下 git submodule init && git submodule update 命令. Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/purcell-emacs-install.html":{"url":"post/purcell-emacs-install.html","title":"purcell-emacs安装","keywords":"","body":"install clone the repo mv ~/.emacs.d ~/.emacs.d.bak git clone https://github.com/purcell/emacs.d.git ~/.emacs.d checkout your branch cd ~/.emacs.d git branch eiuapp git checkout eiuapp change melpa address diff --git a/lisp/init-elpa.el b/lisp/init-elpa.el index a6ee481..09e86c3 100644 --- a/lisp/init-elpa.el +++ b/lisp/init-elpa.el @@ -18,7 +18,7 @@ (let* ((no-ssl (and (memq system-type '(windows-nt ms-dos)) (not (gnutls-available-p)))) (proto (if no-ssl \"http\" \"https\"))) - (add-to-list 'package-archives (cons \"melpa\" (concat proto \"://melpa.org/packages/\")) t) + (add-to-list 'package-archives (cons \"melpa\" (concat proto \"://elpa.emacs-china.org/melpa/\")) t) ;; Official MELPA Mirror, in case necessary. ;;(add-to-list 'package-archives (cons \"melpa-mirror\" (concat proto \"://www.mirrorservice.org/sites/melpa.org/packages/\")) t) (if ( configure chemacs DESKTOP-APB1HCJ% cat ~/.emacs-profiles.el ;; ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\")))) ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\"))) (\"spacemacs\" . ((user-emacs-directory . \"~/spacemacs\") (env . ((\"SPACEMACSDIR\" . \"~/.spacemacs.d\"))))) (\"lazycat\" . ((user-emacs-directory . \"~/lazycat-emacs\"))) (\"purcell\" . ((user-emacs-directory . \"~/.emacs.d\"))) ) DESKTOP-APB1HCJ% startup emacs --with-profile purcell wait some minutes, then choose the theme, press \"y\" twice. finally, you'll see ;; Happy hacking, u - Emacs ♥ you!. Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/tommyx-emacs-install.html":{"url":"post/tommyx-emacs-install.html","title":"tommyx-emacs安装","keywords":"","body":"安装 tommyx-emacs install clone the repo git clone --recursive https://github.com/TommyX12/tommyx-emacs.git ~/tommyx-emacs/ checkout your branch git branch eiuapp git checkout eiuapp chemacs 创建包下载目录 这个目录,可以自己定义. 因为之前 ~/.emacs.d/已经使用了,我这里使用 ~/.emacs.d.tommyx-emacs/ mkdir ~/.emacs.d.tommyx-emacs/ 把 tommyx-emacs 放入 ~/.emacs-profiles.el DESKTOP-APB1HCJ% cat ~/.emacs-profiles.el ;; ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\")))) ((\"default\" . ((user-emacs-directory . \"~/.emacs.d\"))) (\"tommyx-emacs\" . ((user-emacs-directory . \"~/.emacs.d.tommyx-emacs/\"))) ) DESKTOP-APB1HCJ% 这样的话, 等会 tommyx-emacs 启动时,下载的包,就会在这个目录下. init.el 因为, tommyx-emacs 启动, 需要 启动文件, 如果直接使用 add-to-emacs.el 当成 ~/.emacs.d.tommyx-emacs/init.el 启动的话, 会报错如下: error: Package `use-package-' is unavailable 找到下文 https://emacs.stackexchange.com/questions/39250/error-package-use-package-is-unavailable 再结合 https://elpa.emacs-china.org/ 做一个 init.el 文件如下: ;;; Dependencies ;; require package (require 'package) (setq package-archives '((\"gnu\" . \"http://elpa.emacs-china.org/gnu/\") (\"org-cn\" . \"http://elpa.emacs-china.org/org/\") (\"melpa\" . \"http://elpa.emacs-china.org/melpa/\")) ) ;; add melpa stable (add-to-list 'package-archives '(\"melpa-stable\" . \"https://stable.melpa.org/packages/\")) ;; add melpa ;; (add-to-list 'package-archives ;; '(\"melpa\" . \"http://melpa.milkbox.net/packages/\") ;; ) ;; Initialise packages (package-initialize) (package-refresh-contents) ;; add use package (package-install 'use-package) 至此, 我们有了init.el add-to-emacs.el 把 add-to-emacs.el 的内容放到 init.el 文件 cat ~/tommyx-emacs/add-to-emacs.el >> ~/.emacs.d.tommyx-emacs/init.el startup emacs --with-profile tommyx-emacs wait some minutes, then 問你是否更新包, press \"y\" twice. finally, you'll see TommyX's Emacs 26.1 在左上角. 基本上就是安装成功了. Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/dsdshcym-doom-emacs-install.html":{"url":"post/dsdshcym-doom-emacs-install.html","title":"dsdshcym-doom-emacs安装","keywords":"","body":"https://github.com/dsdshcym/doom-emacs 的 doom-emacs 安装 Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/pierre-lecocq-emacs-install.html":{"url":"post/pierre-lecocq-emacs-install.html","title":"pierre-lecocq emacs安装","keywords":"","body":"https://github.com/pierre-lecocq/emacs.d 安装 emacs4developers author pierre-lecocq's emacs.d configure Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-open-remote-shell.html":{"url":"post/emacs-open-remote-shell.html","title":"emacs使用tramp时打开远程shell","keywords":"","body":"emacs使用tramp时打开远程shell not success reference web https://emacs-china.org/t/emacs-shell/2611 https://blog.csdn.net/Anton8801/article/details/83686543 https://superuser.com/questions/841178/directly-open-remote-shell-with-tramp-in-emacs Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-auto-use-diff-eslint.html":{"url":"post/emacs-auto-use-diff-eslint.html","title":"emacs 不同的js工程使用不同的eslint","keywords":"","body":"emacs 不同的js工程使用不同的eslint Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/w3m/w3m-step-by-step.html":{"url":"post/w3m/w3m-step-by-step.html","title":"在 Emacs 下浏览网页（w3m）","keywords":"","body":"w3m 入门 https://forum.suse.org.cn/t/emacs-w3m/2918 快捷键 http://kongll.github.io/2015/04/24/Emacs-w3m-%E6%93%8D%E4%BD%9C%E5%BF%AB%E6%8D%B7%E9%94%AE/ w3m 下如何复制网页中的文字 方法1 下载后复制 下载： C-x C-w RET; ~/.w3m/pages/myfirstpage.org 复制： 这个方式，优点就是，老是要下载文件。 问题 为什么安装了w3m, 却使用不了？ 现象 M-x package-install RTN w3m RTN 后，关闭emacs, 然后再打开 emacs, 则 M-x w3m 无效，无选项.. 解决 http://jhat.pw/blog/2011/03/05/install-emacs-w3m.html 安装 sudo apt-get install w3m-el-snapshot 为什么 lazycat-emacs 下使用不了 w3m? 没有安装w3m M-x package-list-packages RTN w3m RTN emacs 科学上网 如何使用到 google 搜索？ 默认搜索使用的就是google,但是由于你懂的原因，导致，用google搜索不到内容，那么如何使得 w3m 科学上网呢？ https://emacs-china.org/t/topic/2808/1 https://emacs-china.org/t/emacs/9210 spacemacs 其实 子龙山人 的配置中，已经有了 w3m 在 emacs 进行 科学上网 (可跳过) google: emacs w3m proxy 找到： https://lists.gnu.org/archive/html/help-gnu-emacs/2008-10/msg00046.html http://blog.binchen.org/posts/toggle-http-proxy-in-emacs-w3m.html 中的评论处，有提到一个方法 (setq w3m-command-arguments (nconc w3m-command-arguments '(\"-o\" \"http_proxy=http://127.0.0.1:6152/\"))) 配置不正确 但是提示： Error (use-package): w3m/:init: Symbol’s value as variable is void: w3m-command-arguments 怎么解决？ 这说明，配置还是有问题的。 配置正确，要放在 w3m 启动之后 然后，我放在了自己的layer中，配置如下： (defun zilongshanren-tomtsang/init-w3m () (use-package w3m :init ) ) (defun zilongshanren-tomtsang/post-init-w3m () ;; w3m post start ;; Proxy Gateway (setq w3m-command-arguments (nconc w3m-command-arguments '(\"-o\" \"http_proxy=http://127.0.0.1:8118/\"))) ;; w3m post end ) 然后在 emacs 中运行 C-h v w3m-command-arguments RTN, 确实是有看到 \"-o\" \"http_proxy=http://127.0.0.1:8118/\", 成功。 但是，在 emacs 中运行 M-x w3m RTN, g RTN www.google.com 不成功。 是这个参数，本身不正确，还是参数本身就无效？不明白。有知道的，请告诉我呀... 正确 https://melpa.org/#/?q=emacs-w3m 找到了 w3m, 然后点击 github, 来到 https://github.com/emacs-w3m/emacs-w3m 再来到 https://github.com/emacs-w3m/emacs-w3m/blob/8fd65dd9c7d2393ab66c65ee1de67a84dcc779ce/README 其中 4.3. Proxy Gateway 中确实是有提到上面的配置。但是，我尝试了，没有成功。 所以，我就尝试 确保 http_proxy 有效：在命令行中运行： curl --proxy http://127.0.0.1:8118 https://www.reddit.com/ 运行emacs前，先在命令行中运行： export http_proxy='http://127.0.0.1:8118' 运行emacs：在命令行中运行：emacs --with-profile spacemacs curl --proxy http://127.0.0.1:8118 https://www.reddit.com/ export http_proxy='http://127.0.0.1:8118' emacs --with-profile spacemacs 然后在 emacs 中运行 M-x w3m RTN, g RTN www.google.com 成功。 配置 陈冰的配置 https://github.com/wangchen/redguardtoo-emacs.d/blob/master/lisp/init-emacs-w3m.el 包 https://github.com/emacs-w3m/emacs-w3m Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/usage/find-replace.html":{"url":"post/usage/find-replace.html","title":"find and replace","keywords":"","body":"find and replace https://www.cnblogs.com/skyhacker/archive/2012/01/03/2311437.html find M-x isearch-forward or C-s M-x isearch-backward or C-r M-x iy-go-to-char M-x jump-char M-x spacemacs/helm-project-do-ag or SPC s a p replace M-% Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/usage/truncate-line.html":{"url":"post/usage/truncate-line.html","title":"换行","keywords":"","body":"关于emacs的换行 1.不嫌烦的，每次M-x toggle-truncate-lines切换换行与不换行 2.一劳永逸的，M-x customize-option，输入truncate-partial-width-windows，将出来的设置页面中的参数改为off，然后保存(Save for future sessions) 3.M-x auto-fill-mode也是切换换行模式，不过这是要在文章内容里插入回车符号 https://www.cnblogs.com/samael/articles/2017623.html https://blog.csdn.net/weixin_30532369/article/details/95296140 Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-display-setup.html":{"url":"post/emacs-display-setup.html","title":"emacs some display setup","keywords":"","body":"emacs some display setup date, menu-bar, tool-bar, scroll-bar, inhibit-startup-message, highlight line https://blog.csdn.net/u010654583/article/details/73920206 ;; https://blog.csdn.net/u010654583/article/details/73920206 ;; I. 显示时间 ;; .emacs加上： (display-time-mode 1) ;; 常显 (setq display-time-24hr-format t) ;;格式 (setq display-time-day-and-date t) ;;显示时间、星期、日期 ;; II. 隐藏菜单栏工具栏滚动条 ;; .emacs加上： (tool-bar-mode 0) (menu-bar-mode 0) (scroll-bar-mode 0) ;;注: 新版改成使用0，旧版使用nil的做法已失效，但 (set-scroll-bar-mode nil) 仍可使用 ;; III. 关闭启动画面 ;; .emacs加上： (setq inhibit-startup-message t) ;; IV. highlight当前行 ;; .emacs加上： (global-hl-line-mode 1) Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-frame-title.html":{"url":"post/emacs-frame-title.html","title":"emacs setup frame title","keywords":"","body":"个性化 emacs 的 frame title and icon https://github.com/eiuapp/lazycat-emacs/commit/873441b7e349998e6f4bb398053d3390fa7bc97e Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/usefull-packages.html":{"url":"post/usefull-packages.html","title":"some usefull packages","keywords":"","body":"some usefull packages first level https://github.com/emacs-tw/awesome-emacs manateelazycat emacs-application-framework awesome-tab awesome-pair aweshell awesome-tray good lsp-mode auto complete tramp buffer-move company-tabnine Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/install-emacs-application-framework.html":{"url":"post/install-emacs-application-framework.html","title":"install emacs-application-framework","keywords":"","body":"安装 emacs-application-framework emacs-application-framework相当好 安装 https://github.com/manateelazycat/emacs-application-framework#installation D-Bus error: \"No connection to bus\" 如果报出 D-Bus error: \"No connection to bus\" 则，参考： https://lists.gnu.org/archive/html/help-gnu-emacs/2011-10/msg00232.html 在命令行下，先运行： eval `dbus-launch` export DBUS_SESSION_BUS_ADDRESS emacs --with-profile spacemacs 这样就不会报错了。 (未解决)core dumped when you type M-x eaf-open-browser RET https://news.baidu.com/ RET, get following information from *message* buffer: Opening https://news.baidu.com/ with EAF-browser... *eaf* aborted (core dumped) https://github.com/manateelazycat/emacs-application-framework/issues/52 Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-word.html":{"url":"post/emacs-word.html","title":"emacs with word","keywords":"","body":"Emacs deal with word git 是不是没法处理 word 文件的合并? https://reviews.llvm.org/D68002 这个对吗? llvm/utils/emacs/tablegen-mode.el Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-network/emacs-proxy.html":{"url":"post/emacs-network/emacs-proxy.html","title":"emacs with proxy","keywords":"","body":"emacs with proxy shell proxy startup with proxy export https_proxy='http://127.0.0.1:8118' export http_proxy='http://127.0.0.1:8118' emacs proxychain proxychains emacs -sS 192.168.168.137 about proxychain, read this zilongshanren's shadowsocks-proxy-mode M-x shadowsocks-proxy-mode faq spacemacs zilongshanren's shadowsocks-proxy-mode do not work why \"https://news.qq.com/\" can't open? but https://news.baidu.com/ can be opened. Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-rocks/5-keys.html":{"url":"post/emacs-rocks/5-keys.html","title":"episode 05","keywords":"","body":"http://emacsrocks.com/e05.html keystoke C-s runs the command M-x my-swiper-search M-x isearch-backward M-x forward-list M-x mark-sexp M-x kill-region M-l or M-x markdown-demote Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/org-mode/org-mode-pdf.html":{"url":"post/org-mode/org-mode-pdf.html","title":"org-mode与pdf","keywords":"","body":"mac下如何配置 org-mode 才能输出中文的pdf？ 来自群聊中 可以用xelatex 或者 ;; latex 支持中文 (require 'ox) (require 'ox-html) (require 'ox-publish) (add-to-list 'org-latex-classes '(\"pdf\" \"\\\\documentclass[fontset = mac]{ctexart} [NO-DEFAULT-PACKAGES] \\\\usepackage[colorlinks,linkcolor=black,anchorcolor=black, citecolor=black]{hyperref} \\\\usepackage[top=3truecm,bottom=2.5truecm, left=1.1truecm,right=1.1truecm, bindingoffset=1.0truecm, headsep=1.6truecm, footskip=1.5truecm, headheight=15pt % 标准中没有要求页眉的高度，这里设置成 % 15pt 了 ]{geometry} \\\\setCJKmainfont[BoldFont={Microsoft YaHei},ItalicFont={Microsoft YaHei}]{Microsoft YaHei} \" (\"\\\\section{%s}\" . \"\\\\section*{%s}\") (\"\\\\subsection{%s}\" . \"\\\\subsection*{%s}\") (\"\\\\subsubsection{%s}\" . \"\\\\subsubsection*{%s}\") (\"\\\\paragraph{%s}\" . \"\\\\paragraph*{%s}\") (\"\\\\subparagraph{%s}\" . \"\\\\subparagraph*{%s}\"))) (setq org-latex-default-class \"pdf\") (setq org-latex-pdf-process '( \"xelatex -interaction nonstopmode -output-directory %o %f\" \"xelatex -interaction nonstopmode -output-directory %o %f\" \"xelatex -interaction nonstopmode -output-directory %o %f\" \"rm -fr %b.out %b.log %b.tex auto\" )) (defun peng-use-xelatex () (interactive) (let* ((tempfile (file-name-base))) (progn (shell-command (concat \"rm -rf \" tempfile \".bbl \" tempfile \".blg \" tempfile \".out \" tempfile \".log \" tempfile \".aux \" tempfile \".toc\" tempfile \".pdf\")) (compile (concat \"xelatex \" (concat tempfile \".tex\") (concat \";rm -rf \" tempfile \".bbl \" tempfile \".blg \" tempfile \".out \" tempfile \".log \" tempfile \".aux \" tempfile \".toc\" \";open \" tempfile \".pdf\")))))) Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/magit/faq.html":{"url":"post/magit/faq.html","title":"magit faq","keywords":"","body":"Error (use-package): magit/:config: Symbol’s value as variable is void: magit-log-arguments https://github.com/syl20bnr/spacemacs/issues/12193 https://github.com/syl20bnr/spacemacs/issues/12193#issuecomment-529858701 如果是spacemacs, 则更新最新版本的 spacemacs 的 develop 分支就可以了. evil-magit 目标: magit-mode 下, 进入 evil 状态, 可以通过 hjkl 等上下左右. 在 magit mode 下自动加载 evil-magit-toggle-text-minor-mode (eval-after-load 'magit '(progn (evil-magit-toggle-text-minor-mode) ) Warning (magit): Magit no longer uses Magit-Popup. (未成功) Warning (magit): Magit no longer uses Magit-Popup. It now uses Transient. See https://emacsair.me/2019/02/14/transient-0.1. However your configuration and/or some third-party package that you use still depends on the `magit-popup' package. But because `magit' no longer depends on that, `package' has removed it from your system. If some package that you use still depends on `magit-popup' but does not declare it as a dependency, then please contact its maintainer about that and install `magit-popup' explicitly. If you yourself use functions that are defined in `magit-popup' in your configuration, then the next step depends on what you use that for. * If you use `magit-popup' to define your own popups but do not modify any of Magit's old popups, then you have to install `magit-popup' explicitly. (You can also migrate to Transient, but there is no need to rush that.) \\ FEDJ * If you add additional arguments and/or actions to Magit's popups, then you have to port that to modify the new \"transients\" instead. See https://github.com/magit/magit/wiki/Converting-popup-modifications-to-transient-modifications To find installed packages that still use `magit-popup' you can use e.g. \"M-x rgrep RET magit-popup RET RET ~/.emacs.d/ RET\". 要把所有的 magit-popup 相关联的部分转至 magit/transient. reference https://github.com/magit/magit/wiki/Converting-popup-modifications-to-transient-modifications ;; magit-popup (magit-define-popup-switch 'magit-log-popup ?1 \"First parent\" \"--first-parent\") ;; transient (transient-append-suffix 'magit-log \"-A\" '(\"-1\" \"First parent\" \"--first-parent\")) 好吧,按这个思路,我们现在试一下. (magit-define-popup-switch 'magit-push-popup ?u \"Set upstream\" \"--set-upstream\") 则修改成: (transient-append-suffix 'magit-push \"-u\" '(\"Set upstream\" \"--set-upstream\")) 发现, 没效果, 是不是哪里错了? Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/irc/emacs-irc.html":{"url":"post/irc/emacs-irc.html","title":"emacs irc","keywords":"","body":"使用 emacs 连接 irc irc.freenode.net register https://freenode.net/kb/answer/registration /msg NickServ REGISTER hello1123 273412935@qq.com 然后在 273412935@qq.com 中会收到邮件, 邮件会有命令, irc 中运行一下: /msg NickServ VERIFY REGISTER helloit axayvhiwejea 常用命令与参考 http://www.voidcn.com/article/p-ezyhvkui-bad.html http://ergoemacs.org/emacs/emacs_fun.html Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/learn/learn-how-to-learn.html":{"url":"post/learn/learn-how-to-learn.html","title":"learn how to learn","keywords":"","body":"learn how to learn emacs https://github.com/emacs-tw/awesome-emacs#tutorials https://sachachua.com/blog/wp-content/uploads/2013/05/How-to-Learn-Emacs-v2-Large.png https://github.com/pierre-lecocq/emacs4developers/blob/master/chapters/06-readings-and-resources.org https://zilongshanren.com/post/review-of-mastering-emacs/ https://sachachua.com/blog/category/geek/emacs/ vedio http://emacsrocks.com/ http://www.virtuouscode.com/category/emacs-reboot/ elisp elisp-guide lisha's elisp-guide Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "},"post/emacs-reference.html":{"url":"post/emacs-reference.html","title":"emacs master configuration","keywords":"","body":"emacs master Some may reference configuration emacs Some well-known programmer configuration, I will not introduce too much. lujun9972-spacemacs tommyx-emacs dsdshcym-doom-emacs emacs rocks Emacs实践指南 | Emacs实践指南点击关注【servicemesher】公众号回复【加群】加入学习群 | Copyright © eiuapp.github.io 2017-2019 all right reserved，powered by Gitbook Updated at 2019-11-14 07:28:26 "}}